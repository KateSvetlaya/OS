#include <iostream>
#include <vector>
#include <ctime>
#include <cmath>   
#include <windows.h>
using namespace std;


struct DataForPolynom {
	int deg;
	vector<double> add;
	double x;
	double res;
};


DWORD WINAPI polynom(LPVOID parametr)
{

	DataForPolynom* data = (DataForPolynom*)parametr;

	double result = 0;
	for (int i = 0; i < data->deg; i++)
	{
		result += data->add[i] * pow(data->x, data->deg - i);
		Sleep(15);
	}
	result += data->add[data->deg];
	Sleep(15);
	cout << "p(" << data->x << ") = " << result << endl;
	data->res = result;
	return 0;
}


void getdatafor(DataForPolynom& dt) {
	cout << "Vvedite stepen' polynoma: ";
	cin >> dt.deg;
	for (int i = 0; i < dt.deg + 1; i++) {
		double var;
		cout << "Koeficient: ";
		cin >> var;
		dt.add.push_back(var);
	}
	cout << endl;

}

int main() {
	DataForPolynom num, denum;
	getdatafor(num);
	getdatafor(denum);
	double x;
	cout << "Vvedite znachenie x: ";
	cin >> x;
	cout << endl;
	num.x = x;
	denum.x = x;

	int polynom_count = 2;

	HANDLE* PolynomThreadHandls = new HANDLE[polynom_count];
	DWORD* PolynomThreadID = new DWORD[polynom_count];
	PolynomThreadHandls[0] = CreateThread(NULL, 0, polynom, (void*)&num, 0, &PolynomThreadID[0]);
	PolynomThreadHandls[1] = CreateThread(NULL, 0, polynom, (void*)&denum, 0, &PolynomThreadID[1]);
	WaitForMultipleObjects(polynom_count, PolynomThreadHandls, TRUE, INFINITE);

	cout << "f(" << x << ") = " << num.res / denum.res;

	return 0;
}
